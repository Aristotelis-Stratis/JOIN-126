<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Board</title>
  <link rel="icon" type="image/x-icon" href="/assets/img/favicon/JOIN-logo-white.png">
  <link rel="stylesheet" href="/styles/style.css" />
  <link rel="stylesheet" href="/styles/fonts.css" />
  <!-- needs to be linked to all htmls-->
  <script src="/script.js"></script>
  <script src="/js/storage.js"></script>
  <script src="/js/board.js"></script>
  <script src="/js/add_task.js"></script>
  <script src="/js/add_task.template.js"></script>
  <script src="/js/templates.js"></script>
</head>

<body onload="init();">
  <section class="main-container">
    <!-- left part of website fixed menu -->
    <div w3-include-html="./assets/templates/nav.html"></div>
    <!--right part of website (content) -->
    <div class="right-section">
      <!-- top navbar -->
      <div w3-include-html="./assets/templates/header.html"></div>

      <div class="content-board" id="main-content">
        <div class="content-container">
          <div class="confirm-container">
            <div class="task-confirmation-container" style="display:none" id="add-task-confirmation"></div>
          </div>
          <div class="board-container">

            <div class="board-headline-container">
              <div class="board-headline">Board</div>
              <div class="input-button-board-container">
                <input class="board-input" type="text" placeholder="Find Task">
                <img class="search-png" src="./assets/img/icons/search.png" alt="search-Icon">
                <button onclick="showAddTaskPopUp()" class="add-task-btn">Add task <img class="plus-sign-white"
                    src="./assets/img/icons/add-white.png" alt="White Plus Icon"></button>
              </div>
            </div>

            <div class="dragdrop-container">
              <div class="column-properties">
                <div class="taskflow-board">
                  <div class="column-titles">To do</div>
                  <img onclick="showAddTaskPopUp()" src="../assets/img/icons/plus_button_dark.png"
                    alt="dark-blue-plus-sign">
                </div>
                <div id="ToDos">
                  <div class="no-task-box">No tasks To do</div>
                </div>
              </div>
              <div class="column-properties">
                <div class="taskflow-board">
                  <div class="column-titles">In Progress</div>
                  <img onclick="showAddTaskPopUp()" src="../assets/img/icons/plus_button_dark.png"
                    alt="dark-blue-plus-sign">
                </div>
                <div id="progress-container">
                  <div class="no-task-box">No Task is in Progress</div>
                </div>
              </div>
              <div class="column-properties">
                <div class="taskflow-board">
                  <div class="column-titles">Await feedback</div>
                  <img onclick="showAddTaskPopUp()" src="./assets/img/icons/plus_button_dark.png"
                    alt="dark-blue-plus-sign">
                </div>
                <div id="feedback-container">
                  <div class="no-task-box">No Task requires Feedback</div>
                </div>
              </div>
              <div class="column-properties">
                <div class="taskflow-board">
                  <div class="column-titles fourth-property">Done</div>
                </div>
                <div id="done-container">
                  <div class="no-task-box fourth-property">No Task is Done</div>
                </div>
              </div>
            </div>
          </div>
  </section>

  <section id="overlay" class="board-overlay d-none-board" onclick="closePopUp()">
    <div id="pop-up" class="board-pop-up" onclick="doNotClosePopUp(event)"></div>
  </section>

  <section id="overlay2" class="board-overlay d-none-board" onclick="closeAddTaskPopUp()">
    <div id="addTaskPopUp" class="add-task-popup" onclick="doNotCloseAddTaskPopUp(event)">
      <div class="form-container">
        <div class="task-title-popup">
          <h1>Add Task</h1>
          <img onclick="closeAddTaskPopUp()" src="./assets/img/icons/close.png" alt="Close-PNG">
        </div>
        <form class="task-form" id="taskForm">
          <div class="form-left">
            <div class="form-group">
              <label for="title">Title<span class="form-required-color">*</span></label>
              <input type="text" id="title" required placeholder="Enter a title"
                oninput="hideValidationError('title', 'title-error-message')">
              <span id="title-error-message" class="error-message">This field is required.</span>
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <textarea class="no-validate" id="description" placeholder="Enter a Description"></textarea>
            </div>
            <!-- assign to list -->
            <div class="form-group">
              <label for="assignedTo">Assigned to</label>
              <div class="drop-down-menu-container" onclick="toggleAssignDropdownMenu()">
                <div class="drop-down-image-container">
                  <img id="arrow-assign-to" src="assets/img/icons/arrow_drop_down.png" alt="">
                </div>
                <input class="no-validate task-assign" type="text" id="assignedTo"
                  placeholder="Select contacts to assign" oninput="filterContacts(this.value)">

                <div id="assign-dropdown-menu" class="dropdown-menu">
                  <!-- render contact list here -->
                  <div class="task-contact-list" id="task-contact-list"></div>
                </div>
              </div>
              <div class="selected-contacts-container" id="selected-contacts-list"></div>
            </div>
          </div>


          <div class="form-right">
            <!-- Date -->
            <div class="form-group">
              <label for="dueDate">Due date<span class="form-required-color">*</span></label>
              <input type="date" id="dueDate" required onchange="validateDueDate()">
              <span id="date-error-message" class="error-message" style="display: none;">This
                field is required</span>
            </div>

            <!-- priority buttons -->
            <div class="form-group priority">
              <label>Prio</label>
              <div class="priority-button-container">
                <button id="priority-urgent" class="priority-button" data-priority="urgent"
                  onclick="togglePriority('priority-urgent')"><span>Urgent</span> <img src="assets/img/icons/urgent.png"
                    alt="Urgent Priority"></button>
                <button id="priority-medium" class="priority-button" data-priority="medium"
                  onclick="togglePriority('priority-medium')"><span>Medium</span> <img src="assets/img/icons/medium.png"
                    alt="Medium Priority"></button>
                <button id="priority-low" class="priority-button" data-priority="low"
                  onclick="togglePriority('priority-low')"><span>Low</span> <img src="assets/img/icons/low.png"
                    alt="Low Priority"></button>
              </div>
            </div>

            <div class="form-group select-container">
              <label for="category">Category<span class="form-required-color">*</span></label>
              <div class="select-dropdown" id="select-dropdown" onclick="toggleCategoryDropdownMenu()">
                <div class="selected-option" id="selected-option">Select task category</div>
                <div class="drop-down-image-container">
                  <img id="arrow-category" src="assets/img/icons/arrow_drop_down.png" alt="">
                </div>
                <div class="dropdown-menu" id="category-dropdown-menu">
                  <div class="dropdown-category" onclick="setSelectedCategory(1)">Technical
                    Task</div>
                  <div class="dropdown-category" onclick="setSelectedCategory(2)">User Story
                  </div>
                </div>
              </div>
              <select id="category-todo" required class="d-none task-category">
                <option value="Technical Task">Technical Task</option>
                <option value="User Story">User Story</option>
              </select>
              <div id="category-error-message" class="error-message">This field is required.</div>
            </div>
            <div class="form-group">
              <label>Subtasks</label>
              <div class="drop-down-menu-container">

                <div class="sub-image-container" id="image-container">
                  <img id="addBtn" src="assets/img/icons/add.png" alt="">
                  <div id="sub-seperator" class="subtask-seperator" style="display:none;">
                  </div>
                  <img id="closeBtn" src="assets/img/icons/close.png"
                    onclick="clearInputField(), toggleAddButtonImage()" alt="" style="display:none;">
                </div>

                <input class="no-validate subtask" type="text" id="subTaskInput" maxlength="15"
                  placeholder="Add new subtask" oninput="toggleAddButtonImage()">
              </div>
              <div class="subtask-container" id="subtaskContainer">
                <!-- Hier werden die Subtasks gerendert -->
              </div>
            </div>
          </div>
        </form>
      </div>
      <!-- wrapper -->
      <div class="add-task-wrapper">
        <div class="form-below">
          <div class="aco-button-container">
            <button class="fb lb mb" onclick="resetUI()">Clear <img src="assets/img/icons/x.png" alt="Clear"></button>
            <button class="fb rb" onclick="createTaskOnBoard(); showToDos();">Create Task <img src="assets/img/icons/check.png"
                alt="Create Task"></button>
          </div>
        </div>
        <div class="form-info">
          <span><span class="form-required-color">*</span>This field is required</span>
        </div>
      </div>
    </div>
  </section>
</body>

</html>